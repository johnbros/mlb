# MLB Database

As a little background I love baseball I always have and probably always will. I watch probably 75% of the Red Sox games each year and I'm always analyzing what is the pitcher going to throw next should we be stealing here, maybe in another life I would've wanted to coach. Overall the results of this data collection process were very rewarding I got a lot of high quality data in a very organized fashion from many different sources while learning different scraping tactics and learning Postgresql. To see the database design view src/DB_Documentation.MD which contains detailed information on the different tables/columns/relationships in the database.

## Baseball Savant Inspiration

There was this one rainy day where I was doing what I normally do on my computer just clicking through HTTP requests on different websites when I discovered baseball savant was sending large amounts of game data over a scrapable api. Naturally I immediately thought of the possibilites and started designing a database to store this data in a usable way where I could reconstruct games as accurately as possible. The process was long because up until this point I hadn't taken the time to learn SQL and naturally I attempted to dive right into postgresql "how hard could it be" the database got big, the multi threading I tried gave me some results I wasn't expecting, and some batch insertions would silently fail and I would end up missing data. The process was very rewarding and at the end the data encompassed 1905-2024 with pitch by pitch outcomes starting in 1950(balls & strikes) and specific pitch types actually coming on the scene in 2015!

## Retrosheet Expansion

I quickly decided that the data I had collected from baseball savant wasn't going to satisfy my ambition because while I had the outcome of each at bat and I had succesfully reconstructed at bats and scores I didn't know where the base runners were and I decided that was a critical piece of the puzzle when it came to reconstructiong the state of the game especially when it was going to come down to a machine learning solution I wanted to maintain a system that was as accurate as possible. So this is where retrosheet came in, the people that work on that are doing amazing work of maintaining the history of Americas pasttime and they have game event logs going back into the early 1900s, I only did post 2005 since thats when the accuracy really took a step up but the second part of this project was dissecting those event logs to supplement the database with the actual base runner who was on each base, not only did I know someone was on base but I knew specifically who it was. Now I could start to look into if the specific runner had a measurable impact on the outcome of at bats. This is something I believe is a very important underrated aspect of the game.

## Weather Expansion

The missing puzzle piece was the weather conditions of the game and it is a tricky piece since historical weather is a pretty hard thing to lock down especially since I was doing all this with no expenses. I eventually found a free trial of a weather website called weatherbit which had historical weather for the last 10 years. The problem was the limit on the API key that I was given was very low so I hit that very fast and after a quick calculation found out that I would need to have that key for over 100 days to get all the data I was attempting to collect. My solution to this after finding out that it was also limited by IP address so my roomates couldn't just run the script for me with different keys was to have them create keys to give to me and then I learned how to use gcloud compute to start up virtual machines with different IP addresses and with the support from 7 different friends I was able to use 8 API keys and collect the data in just about 2 weeks. It is geographically precise so I only collected weather data at each of the MLB stadiums used in that 10 year span 2015-2014 and I have filtered out the stadiums that either have domes or retractable roofs so that weather will be given a reasonable ~73 degrees fahrenheit with no rain/wind etc. This was the final task of this project and I think it went quite well overall.
